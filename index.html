<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CrazeAI - Global Intelligence</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;700&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    
    <style>
        /* --- 基础设置 --- */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: #020205;
            /* 移除静态渐变，改用 Canvas 动态绘制 */
            color: #ffffff;
            font-family: 'Space Grotesk', sans-serif;
            height: 100vh;
            width: 100vw;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            cursor: none; /* 保持隐藏默认鼠标 */
        }

        /* --- 背景 Canvas --- */
        #bg-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
        }

        /* 扫描线效果 */
        .scanlines {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, rgba(255,255,255,0), rgba(255,255,255,0) 50%, rgba(0,0,0,0.1) 50%, rgba(0,0,0,0.1));
            background-size: 100% 4px;
            z-index: 2;
            pointer-events: none;
            opacity: 0.6;
        }

        /* --- 内容容器 --- */
        .content {
            position: relative;
            z-index: 10;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: all 0.5s ease;
            mix-blend-mode: screen; /* 让文字与背景光球融合 */
        }

        .content.blurred {
            filter: blur(8px);
            opacity: 0.3;
            pointer-events: none;
        }

        /* 主标题设计 */
        h1.main-title {
            font-size: 10vw;
            font-weight: 300;
            letter-spacing: 0.05em;
            line-height: 1;
            color: #fff;
            text-shadow: 0 0 20px rgba(0, 212, 255, 0.5);
            margin-bottom: 2rem;
            position: relative;
        }
        
        @media (min-width: 1200px) {
            h1.main-title { font-size: 140px; }
        }

        /* --- Uplink 按钮 --- */
        .uplink-btn {
            background: rgba(255, 255, 255, 0.05);
            color: #fff;
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 12px 40px;
            font-family: 'Share Tech Mono', monospace;
            font-size: 0.9rem;
            letter-spacing: 3px;
            cursor: none;
            transition: all 0.3s ease;
            backdrop-filter: blur(5px);
            border-radius: 2px;
            text-transform: uppercase;
        }

        .uplink-btn:hover {
            background: #fff;
            color: #000;
            box-shadow: 0 0 30px rgba(255, 255, 255, 0.4);
            letter-spacing: 5px;
        }

        /* --- 底部状态栏 --- */
        .status-bar {
            position: absolute;
            bottom: 30px;
            width: 100%;
            display: flex;
            justify-content: space-between;
            padding: 0 40px;
            font-family: 'Share Tech Mono', monospace;
            font-size: 0.75rem;
            color: rgba(255, 255, 255, 0.3);
            z-index: 10;
            pointer-events: none;
        }

        /* --- AI HUD 界面 --- */
        #chat-interface {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            width: 700px;
            max-width: 90vw;
            height: 450px;
            background: rgba(5, 5, 8, 0.9);
            backdrop-filter: blur(30px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            z-index: 100;
            display: flex;
            flex-direction: column;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
            opacity: 0;
            pointer-events: none;
            transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            font-family: 'Share Tech Mono', monospace;
        }

        #chat-interface.active {
            opacity: 1;
            pointer-events: auto;
            transform: translate(-50%, -50%) scale(1);
        }

        .chat-header {
            padding: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chat-title { color: #fff; font-size: 0.9rem; letter-spacing: 1px; }
        .close-btn { background: none; border: none; color: #fff; cursor: none; font-size: 1.2rem; opacity: 0.5; transition: 0.3s; }
        .close-btn:hover { opacity: 1; }

        #chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .message { font-size: 0.9rem; line-height: 1.6; max-width: 85%; }
        .message.ai { color: #aaa; align-self: flex-start; }
        .message.user { color: #fff; align-self: flex-end; text-align: right; }
        .sender { font-size: 0.6rem; opacity: 0.4; display: block; margin-bottom: 3px; letter-spacing: 1px; }

        .chat-input-area {
            padding: 15px;
            border-top: 1px solid rgba(255, 255, 255, 0.05);
            display: flex;
        }

        #user-input {
            flex: 1;
            background: transparent;
            border: none;
            color: #fff;
            font-family: 'Share Tech Mono', monospace;
            outline: none;
            font-size: 0.9rem;
        }

        #send-btn {
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #fff;
            padding: 5px 15px;
            font-family: 'Share Tech Mono', monospace;
            cursor: none;
            font-size: 0.8rem;
            transition: 0.3s;
        }
        #send-btn:hover { background: #fff; color: #000; }

        /* --- 自定义光标 --- */
        #cursor {
            position: fixed;
            top: 0;
            left: 0;
            width: 20px;
            height: 20px;
            border: 1px solid rgba(255, 255, 255, 0.5);
            transform: translate(-50%, -50%) rotate(45deg);
            pointer-events: none;
            z-index: 9999;
            transition: transform 0.1s;
            mix-blend-mode: difference;
        }
        
        body.hovering #cursor {
            transform: translate(-50%, -50%) rotate(45deg) scale(0.5);
            background: #fff;
        }

    </style>
</head>
<body>

    <!-- 3D 旋转球体 Canvas -->
    <canvas id="bg-canvas"></canvas>
    
    <!-- 装饰扫描线 -->
    <div class="scanlines"></div>

    <!-- 自定义光标 -->
    <div id="cursor"></div>

    <!-- 主要内容 -->
    <div class="content" id="main-content">
        <h1 class="main-title">CrazeAI</h1>
        <button id="uplink-btn" class="uplink-btn">Initialize Core</button>
    </div>

    <!-- 底部状态栏 -->
    <div class="status-bar">
        <span>SYS: ONLINE</span>
        <span>LOC: UNKNOWN</span>
        <span>VER: 3.1.0</span>
    </div>

    <!-- AI Chat Interface -->
    <div id="chat-interface">
        <div class="chat-header">
            <span class="chat-title">NEURAL_LINK // V3</span>
            <button class="close-btn" id="close-chat">✕</button>
        </div>
        <div id="chat-messages">
            <div class="message ai">
                <span class="sender">CORE</span>
                System active. I am listening.
            </div>
        </div>
        <div class="chat-input-area">
            <input type="text" id="user-input" placeholder="Input command..." autocomplete="off">
            <button id="send-btn">SEND</button>
        </div>
    </div>

    <script>
        /**
         * 3D Sphere Animation + Silky Background Gradient + Gemini AI Integration
         */
        const canvas = document.getElementById('bg-canvas');
        const ctx = canvas.getContext('2d');
        
        let width, height;
        
        // 3D 点云球体参数
        const sphereConfig = {
            radius: 300,
            dots: 600,
            rotationSpeed: 0.002,
            perspective: 800
        };

        let dots = [];
        let angleX = 0;
        let angleY = 0;
        let mouseX = 0; // Relative to center
        let mouseY = 0; // Relative to center

        // 初始化点
        function initDots() {
            dots = [];
            for(let i=0; i<sphereConfig.dots; i++) {
                const theta = Math.acos(-1 + (2 * i) / sphereConfig.dots);
                const phi = Math.sqrt(sphereConfig.dots * Math.PI) * theta;

                dots.push({
                    x: sphereConfig.radius * Math.sin(theta) * Math.cos(phi),
                    y: sphereConfig.radius * Math.sin(theta) * Math.sin(phi),
                    z: sphereConfig.radius * Math.cos(theta)
                });
            }
        }

        function resize() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
            sphereConfig.radius = Math.min(width, height) / 3.5;
            initDots();
        }

        // 绘制丝滑背景
        function drawBackground(time) {
            // 使用 source-over 混合模式确保颜色不会过度叠加变白
            // 绘制底色
            ctx.fillStyle = '#020205'; 
            ctx.fillRect(0, 0, width, height);
            
            ctx.globalCompositeOperation = 'screen'; // 使用滤色模式让光晕发光

            // 1. 红色流体 (赛博红) - 随时间流动，随鼠标反向移动
            const x1 = width * 0.5 + Math.sin(time * 0.5) * (width * 0.15) - mouseX * 0.1;
            const y1 = height * 0.5 + Math.cos(time * 0.6) * (height * 0.15) - mouseY * 0.1;
            // 确保半径不为负
            const r1 = Math.max(0, Math.min(width, height) * 0.6 + Math.sin(time) * 50);
            
            const g1 = ctx.createRadialGradient(x1, y1, 0, x1, y1, r1);
            // 红色系渐变
            g1.addColorStop(0, 'rgba(255, 20, 60, 0.12)'); 
            g1.addColorStop(1, 'rgba(0, 0, 0, 0)');
            ctx.fillStyle = g1;
            ctx.fillRect(0, 0, width, height);

            // 2. 蓝色流体 (电光蓝) - 随时间不同步流动，随鼠标同向移动
            const x2 = width * 0.5 + Math.cos(time * 0.7) * (width * 0.2) + mouseX * 0.1;
            const y2 = height * 0.5 + Math.sin(time * 0.4) * (height * 0.2) + mouseY * 0.1;
            // 确保半径不为负
            const r2 = Math.max(0, Math.min(width, height) * 0.7 + Math.cos(time * 0.8) * 60);

            const g2 = ctx.createRadialGradient(x2, y2, 0, x2, y2, r2);
            // 蓝色系渐变
            g2.addColorStop(0, 'rgba(20, 80, 255, 0.12)');
            g2.addColorStop(1, 'rgba(0, 0, 0, 0)');
            ctx.fillStyle = g2;
            ctx.fillRect(0, 0, width, height);

            // 3. 鼠标跟随光晕 (白色高光，增加搅拌感)
            const x3 = width/2 + mouseX;
            const y3 = height/2 + mouseY;
            const r3 = 400;
            const g3 = ctx.createRadialGradient(x3, y3, 0, x3, y3, r3);
            g3.addColorStop(0, 'rgba(255, 255, 255, 0.05)');
            g3.addColorStop(1, 'rgba(0, 0, 0, 0)');
            ctx.fillStyle = g3;
            ctx.fillRect(0, 0, width, height);

            ctx.globalCompositeOperation = 'source-over'; // 恢复默认混合模式给点阵使用
        }

        // 主动画循环
        function animate() {
            const time = Date.now() * 0.001; // 时间因子
            
            // 1. 绘制动态背景
            drawBackground(time);

            // 2. 绘制 3D 核心球体
            // 根据鼠标微调旋转速度
            angleY += sphereConfig.rotationSpeed + (mouseX * 0.0001);
            angleX += (mouseY * 0.0001);

            const cx = width / 2;
            const cy = height / 2;
            
            dots.forEach(dot => {
                // 旋转 X
                let y1 = dot.y * Math.cos(angleX) - dot.z * Math.sin(angleX);
                let z1 = dot.z * Math.cos(angleX) + dot.y * Math.sin(angleX);
                
                // 旋转 Y
                let x2 = dot.x * Math.cos(angleY) - z1 * Math.sin(angleY);
                let z2 = z1 * Math.cos(angleY) + dot.x * Math.sin(angleY);

                // 透视投影
                let scale = sphereConfig.perspective / (sphereConfig.perspective + z2);
                let x2d = x2 * scale + cx;
                let y2d = y1 * scale + cy;

                // 绘制点
                // 越靠近镜头(z2越大)越亮，越远越暗
                let alpha = scale - 0.2; 
                if(alpha > 0) {
                    ctx.beginPath();
                    ctx.arc(x2d, y2d, scale * 1.5, 0, Math.PI * 2);
                    
                    // 颜色逻辑：核心点更亮，带一点点冷白
                    ctx.fillStyle = `rgba(${200 + z2/5}, ${255}, ${255}, ${alpha})`;
                    ctx.fill();
                }
            });

            requestAnimationFrame(animate);
        }

        window.addEventListener('resize', resize);
        window.addEventListener('mousemove', (e) => {
            mouseX = e.clientX - width/2;
            mouseY = e.clientY - height/2;
            
            // 光标跟随
            const cursor = document.getElementById('cursor');
            cursor.style.left = e.clientX + 'px';
            cursor.style.top = e.clientY + 'px';
            
            // Hover检测
            const target = e.target;
            if (target.tagName === 'BUTTON' || target.tagName === 'INPUT') {
                document.body.classList.add('hovering');
            } else {
                document.body.classList.remove('hovering');
            }
        });

        /* --- Gemini AI Logic --- */
        const uplinkBtn = document.getElementById('uplink-btn');
        const chatInterface = document.getElementById('chat-interface');
        const closeChatBtn = document.getElementById('close-chat');
        const mainContent = document.getElementById('main-content');
        const chatMessages = document.getElementById('chat-messages');
        const userInput = document.getElementById('user-input');
        const sendBtn = document.getElementById('send-btn');
        const apiKey = ""; 
        const systemPrompt = "You are CrazeAI, a global intelligence core. You are concise, precise, and objective. Your interface is minimal and efficient.";

        uplinkBtn.addEventListener('click', () => {
            chatInterface.classList.add('active');
            mainContent.classList.add('blurred');
            userInput.focus();
        });

        closeChatBtn.addEventListener('click', () => {
            chatInterface.classList.remove('active');
            mainContent.classList.remove('blurred');
        });

        function addMessage(text, type) {
            const msgDiv = document.createElement('div');
            msgDiv.className = `message ${type}`;
            const sender = type === 'user' ? 'USER' : 'CORE';
            msgDiv.innerHTML = `<span class="sender">${sender}</span>${text}`;
            chatMessages.appendChild(msgDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        async function callGemini(query) {
            addMessage("Analyzing...", 'ai'); 
            const loadingMsg = chatMessages.lastElementChild;
            loadingMsg.style.opacity = "0.5";

            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: query }] }],
                        systemInstruction: { parts: [{ text: systemPrompt }] }
                    })
                });
                const data = await response.json();
                chatMessages.removeChild(loadingMsg);
                if (data.candidates && data.candidates[0].content) {
                    addMessage(data.candidates[0].content.parts[0].text, 'ai');
                } else {
                    addMessage("Signal lost.", 'ai');
                }
            } catch (error) {
                chatMessages.removeChild(loadingMsg);
                addMessage("Connection error.", 'ai');
            }
        }

        function handleSend() {
            const text = userInput.value.trim();
            if (!text) return;
            addMessage(text, 'user');
            userInput.value = '';
            setTimeout(() => { callGemini(text); }, 400);
        }

        sendBtn.addEventListener('click', handleSend);
        userInput.addEventListener('keypress', (e) => { if (e.key === 'Enter') handleSend(); });

        // Init
        resize();
        animate();

    </script>
</body>
</html>
